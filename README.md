<img width="600" alt="ChatGPT Image 2025년 7월 17일 오후 12_03_57" src="https://github.com/user-attachments/assets/be9099c0-a89e-43ec-943b-7dcf824f44d7" />


<br/>

### 당신의 삶의 질을 높여줄 데이터 기반 거주지역 추천, 슬세권
우리FISA AI엔지니어링 05기 EDA 실습 토이 프로젝트✨

<br/>


## 📌 프로젝트 소개

> 🏃‍♀️ “갑자기 라면이 먹고 싶은데… 집 근처에 편의점 있던가?”
> 
> 
> 🏡 “자취방, 월세만 볼 게 아니라 나만의 인프라도 봐야죠!”
> 
> 💪 “ 나는 출근 전에 운동을 해야하는데, 근처에 헬스장이나 공원이 있음 좋겠어”
> 

**자취방 구할 때 ‘편의시설 밀집도’까지 따져본 적 있나요?**

요즘은 *‘슬세권’* 시대!

이 프로젝트는 **서울시의 공공데이터를 활용해서 사용자의 라이프스타일에 맞는 동네 TOP3를 추천**하는 슬세권 탐색 서비스입니다.


<br/>

**[서비스 바로가기](https://woorifisa-hyperlocal.streamlit.app/)**

<br/>

---

<br/>


## 🎯 개발 배경

‘슬세권’이란, 슬리퍼 신고 나가도 불편함 없는 인프라가 있는 동네를 뜻합니다.

집세도 중요하지만, **카페, 편의점, 헬스장, 공원, 안전** 같은 ‘생활 편의시설’도 주거 선택에 큰 영향을 줍니다.

> “내가 원하는 인프라가 갖춰진 동네는 어디일까?”
> 

그 질문에서 출발해, **공공데이터를 분석하고 시각화**해서 동네를 추천해주는 서비스를 만들게 되었습니다.


<br/>

## 📊 사용한 데이터

### [colab 으로 미리보기](https://colab.research.google.com/drive/1qmpZF-xYV0x2BPcVRmRZlvRxVOS5VZEl?usp=sharing)

|  | 데이터 셋 | 비고 &nbsp; |
| --- | --- | --- |
| 1 | https://data.seoul.go.kr/dataList/OA-21276/S/1/datasetView.do | 전/월세가 |
| 2 | https://www.data.go.kr/data/15051894/fileData.do# | 공원 |
| 3 | https://www.data.go.kr/data/3074462/fileData.do | 안전 |
| 4 | https://www.data.go.kr/data/15107934/fileData.do | 안전 |
| 5 | https://www.data.go.kr/data/15083033/fileData.do | 편의점, 헬스장, 카페 |
| 6 | https://data.seoul.go.kr/dataList/OA-15067/S/1/datasetView.do | 교통 |
| 7 | https://www.data.go.kr/data/15119338/fileData.do# | 교통 |
| 8 | https://stat.eseoul.go.kr/statHtml/statHtml.do?orgId=201&tblId=DT_201004_O010001&conn_path=I2&mode=tab&obj_var_id=&up_itm_id= | 단위면적 |


<br/>

### 🔖 참고 자료

> **서울시 지역별 hitmap**
> 

https://github.com/raqoon886/Local_HangJeongDong

> **위경도로 시군구 찾기**
> 

https://colab.research.google.com/drive/1KLDCGeCUQOxqIhloTKfVwfE-bfW8b7dG?usp=sharing



<br/>

## 주요 기능

- 사용자가 원하는 선호도(편의시설 3개)에 따른 거주 추천 지역 도출

- 추천 지역 TOP 3 시각화

- 추천 1위 지역과 서울시 평균 편의시설 수 비교 (바 그래프)

- 히트맵을 통한 지역별 편의시설 밀도 시각화

- 트리맵을 통한 편의시설 유형별 분포 확인


<br/>

## ✨ 프로젝트 인사이트

### 1️⃣ 데이터셋에서 찾은 인사이트

대부분의 공공데이터에는 위도, 경도 혹은 주소 정보가 포함되어 있어, 행정동 단위로 데이터를 집계하거나 시각화하는 데 유리하다고 판단함.

그러나 실제 전처리 과정에서, 서울시 전체 행정동 목록과 각 시설 데이터에서 추출한 '동' 정보의 unique() 값이 완전히 일치하지 않음을 확인함.
이로 인해 일부 데이터는 결측치 또는 미매칭으로 처리되어 누락되는 문제가 발생함.

해당 문제를 해결하기 위해, 카카오 로컬 API를 활용하여 주소 기반의 '동' 정보를 재정제함.
(API 출처: https://developers.kakao.com/tool)
    
<br/>

### 2️⃣ 분석 기준을 선정하며 고려했던 사항

1. **면적 대비 편의시설 밀도 계산**
    
    단순히 지역별 편의시설 개수만 비교할 경우, 지역의 크기에 따라 결과가 왜곡될 수 있음
    
    → 서울시의 행정동 단위 면적 데이터를 활용하여, 편의시설 개수를 면적으로 나눈 ‘면적당 밀도’를 기준으로 분석
    
    > 계산식: 편의시설 수 ÷ 지역 면적 (㎢)
    > 
2. **서울시 평균과의 비교 시각화 제공**
    
    추천 지역의 우수성을 객관적으로 확인할 수 있을까?
    
    → 단순 순위 제시뿐만 아니라 서울시 전체 평균과의 비교 시각화를 추가. 이를 통해 추천 지역이 특정 항목에서 실제로 타 지역 대비 우세한지를 판단할 수 있도록 구성
    
3. **‘안전’ 항목 정량화 방식**
    
     '안전' 이란건 주관적인 수치인데 이걸 어떻게 보여줄 수 있을까 
    
    → 서울시의 강력범죄 발생 건수 데이터 뿐만 아니라 가로등 설치 개수 데이터를 함께 사용해 상대적 위험도 뿐만 아니라 방범 인프라 수준 고려
    
<br/>

### 3️⃣ 발견한 인사이트

- **안전' 항목 점수 산정 한계**
    
    - 현재 안전 점수는 가로등 개수 기반으로 산출되고 있음. 이로 인해 영등포구가 3위로 표시되었지만, 실제 2021년 범죄 통계에서는 살인·폭력 사건 발생률이 높은 지역으로 강서구, 영등포구, 구로구가 언급되었음.
    → 가로등 외의 범죄 발생 데이터도 함께 반영할 필요 있음.

- **편의시설 밀집도와 유동인구의 상관성**
    
    - 유동인구가 가장 많은 지역은 중구로 확인되며, 편의점, 헬스장, 카페 등 주요 편의시설이 중구에 다수 밀집되어 있음.
    → 차트 결과와 실제 기사 내용이 일치하며, 유동인구와 편의시설 수 간의 상관관계를 확인할 수 있었음.

<br/>

### 4️⃣ 개선점/아쉬운점/추가로 진행하고 싶은 점

**1. 서울시 가로등 데이터의 불완전성**

- 현재 사용된 가로등 데이터는 서울시 전체를 완전히 포괄하지 않음.
- 도로사업소, 서울시설공단, 자치구 등에서 분산 관리 중일 가능성이 있음.
→ 구 단위별 추가 수집 및 병합을 통해 정확도 보완이 필요함.

**2. Bar 그래프 시각화의 편차 문제**

- 특정 지역의 편의시설 수가 과도하게 높을 경우, 그래프의 상대적인 가독성이 떨어지는 문제가 있음.
→ 로그 변환 또는 축 보정 등의 시각화 기법 개선 필요.

**3. 전국 단위 확장 가능성**

- 서울시 외 지역도 공공데이터 API를 통해 유사한 방식으로 분석 가능함.
→ 향후 전국 주요 도시를 포함한 서비스 확장 여지 있음.

**4. 예산 기반 검색 기능 도입**

- 월세·전세 시세 데이터를 활용하면, 사용자가 설정한 예산 범위 내에서 추천 지역을 필터링하는 기능도 구현 가능할 것으로 보임.
→ 편의시설 기반 추천과 함께, 거주 비용을 고려한 실질적 추천이 가능함.


<br/>
<br/>



## 🔥 트러블슈팅

### 1. csv 파일의 인코딩이 깨지는 문제
- **문제**
  
    <img width="512" height="111" alt="unnamed" src="https://github.com/user-attachments/assets/6133fa0a-00f6-44bc-8abd-fd516b4e9a99" />
    <img width="512" height="567" alt="스크린샷 2025-07-17 115958" src="https://github.com/user-attachments/assets/4dc26a72-ac4e-481b-bfcd-2f97ba29771d" />
    
    csv 파일을 읽어오던 중, 한글 데이터가 깨지거나 `UnicodeDecodeError: 'utf-8' codec can't decode byte 0xbf in position 1: invalid start byte` 발생
    

- **원인**
    
    해당 CSV 파일이 UTF-8이 아닌 CP949 또는 EUC-KR 인코딩으로 저장되어 있었기 때문에, 기본 인코딩 설정(UTF-8)으로 읽을 수 없었음.
    
- **해결**
    
    `pandas.read_csv()` 함수에 `encoding='cp949'`를 명시하여 문제를 해결함.
    
    참고로 CP949는 EUC-KR의 확장 버전으로, Windows 환경에서 한글 데이터를 저장할 때 자주 사용됨.
    

<br/>


### 2. 데이터 전처리 이슈
- **문제**
    
    버스 정류소 위치정보를 변환했을 때 지역 동 정보가 `종로1·2·3·4가동` 으로 나오는 경우가 있었는데 네이버 지도에서는 `종로1.2.3.4가동`으로 표시돼있었음
    
- **해결**
    
    · 이거나 . 이거나 공백이 있는 경우는 모두 동일하게 포맷팅
    
    ( → 본 프로젝트에서는 카카오 API를 사용하여 표기 불일치 문제를 최소화함)
    
<br/>

### 3. 동 정보를 받아오지 못함
- **문제**
    
    `geopy.geocoders`를 사용해 주소에서 '동' 정보를 추출하려 했으나, 도로명 주소만 있거나 주소가 모호한 경우에는 '동' 단위 정보를 받아오지 못함.
    
- **원인**
    
    `geopy`는 글로벌 지오코딩 서비스로, 한국 주소 체계(특히 행정동, 법정동 등)에 대한 세분화 지원이 부족함.
    
- **해결**
    
    **카카오 로컬 API**를 활용하여 문제를 해결함. 카카오 API는 한국 주소 체계에 특화되어 있어, '동' 정보를 안정적으로 추출할 수 있었음.


<br/>

### 4. 가로등 데이터의 값 분포 편차가 큼

- **문제**
    가로등 개수 데이터를 시각화하는 과정에서 지역 간 격차가 커서 일부 지역 값이 과도하게 부각되고, 다른 지역은 거의 보이지 않음.

- **해결**

  np.log1p() 함수를 사용해 로그 변환하여 데이터 스케일을 조정함. `merged['log_count'] = np.log1p(merged['count'])`를 통해 값의 분포를 완만하게 만들어 시각화 결과를 개선함. (log1p은 log(count + 1)과 동일)
  
  ` 예 ) log(3 + 1)` ≈ 1.39 & `log(500 + 1)` ≈ 6.22`

<br/>

### 5. 버튼 클릭 시 페이지 초기화 문제

- **문제**

    Streamlit에서 버튼을 클릭하면 사용자가 선택한 값이 초기화되며 화면이 리셋되는 현상 발생.

- **해결**

    st.session_state를 활용하여 사용자 선택 값을 저장하고 유지함으로써, 버튼 클릭 이후에도 화면 상태가 유지되도록 수정함.
  ```
  # draw_podium_chart(top3)
        st.session_state.priority = priority
        st.session_state.weight = weight
        st.session_state.total_dong_info = total_dong_info
        st.session_state.top3 = total_dong_info.head(3)['dong_info'].tolist()
        st.session_state.selected_dong = st.session_state.top3[0]  # 1위 자동 선택
  ```


<br/>

## 🍀 팀원



| <img src="https://avatars.githubusercontent.com/u/190356693?v=4" width="80"/> | <img src="https://avatars.githubusercontent.com/u/218736983?v=4" width="80"/> | <img src="https://avatars.githubusercontent.com/u/65223360?v=4" width="80"/> | <img src="https://avatars.githubusercontent.com/u/212839729?v=4" width="80"/> |
| :---: | :---:| :---: | :---: |
| [오윤진](https://github.com/YoonjinOh0909) | [유동석](https://github.com/DS0610) | [유문희](https://github.com/muunioi) | [윤호준](https://github.com/dev-hojun-yoon) |
| 데이터 전처리 | 데이터 시각화 | 데이터 시각화 | 데이터 전처리 |



<br/>

### 느낀점/배운점

`오윤진`
- 데이터 선정이 결과에 영향을 끼친다
    - 서울시 가로등 개수라는 제목의 데이터를 사용하여 결과를 도출했지만, 서울시 전체 가로등 개수가 아닌 시에서 관리하는 가로등의 정보만 있었음. 따라서 가로등이 없는 자치구가 있다는 결과가 나옴. 추후 검색을 해보니 자치구에 관리하는 가로등이 별도로 있다는 것을 깨닫고 추가

- 데이터를 전처리 하는 과정에서 같은 도구를 사용해야한다
    - 각 지역의 ‘동’별 정보를 얻기 위해 외부 api를 사용. 그 과정에서 파이썬의 geopy 라이브러리, 카카오 api 두 가지를 이용. 둘의 결과값이 달라서 데이터를 재처리
       예) 종로1 , 2 , 3 , 4 가동 / 종로1.2.3.4가동
      
- 외부 api 혹은 라이브러리를 사용할 때는 종료 시간을 예측하고 실행해야 한다
    - geopy 를 활용해서 위도 경도 값을 얻을 때 colab에서 무작정 실행. 20분이 지나도 끝나지 않자 종료 후 한 개 데이터만 실행해보니 1번의 호출에 0.6-0.7초 소요 그때 돌리고 있던 데이터가 2만개라 3시간 반 소요
    - 무료로 호출할 때는 느리다는 것을 깨닫고 카카오 api로 변경. PC로 실행하니 더욱 빨라져서 1번 호출에 0.04초로 실행되어 데이터를 수월하게 획득
    - 성공, 실패 디버그를 띄우니 진행 정도를 파악할 수 있어서 안정적
    - 오랜 실행이 예상될 때는 try-exception 을 통해 오류로 인한 강제종료가 되지 않게 한다.
    - 
- Group by 할 때 agg() 함수를 사용하면 편리하다
    - 변수 =dataframe.groupby('column').column.agg(['mean', 'min', 'max', 'sum'])
    - 주석을 꼼꼼하게 작성하자
    - 코드를 작성하던 도중 다른 팀원들과 코드를 합치기 위해서 이야기를 하는 중 내가 작성한 코드도 다시 생각해서 설명해야 하는 상황 발생

`유동석`
- 여러 차트가 동시에 뜨는 것 문제가 발생
    - 각 chart와 button 컴포넌트를 만들 때 고유한 key(식별자)를 반드시 부여해야 한다는 것을 깨달음

- 익숙하지 않은 git 사용
    - 협업에 필요한 git 사용법인 git pull, git push, git status 등 여러 명령어들을 배울 수 있었음


`유문희`
- 데이터 시각화를 통해서 데이터의 오류 및 한계를 파악할 수 있다
    - hitmap 을 통해 데이터를 시각화하면서, 기존 csv 파일에서는 발견하지 못했던 데이터 셋의 오류를 발견할 수 있었습니다.
    - 사용자에게 보여주기 위한 ui 뿐만 아니라

- 데이터에 대한 신뢰도
    - 공공데이터라서 의심없이 사용했는데, 실제 사용해보니 서울시의 모든 데이터를 담고 있진 않았음
    - 데이터를 사용할 땐, 데이터에 대한 신뢰도를 확실하게 확보하고 진행해야하며 시각화를 통해 수정 및 보완이 필요하겠구나 배울 수 있었습니다.


`윤호준`
- streemlit 앱은 인터랙션 (버튼 클릭, 슬라이더 이동 등) 이 발생할 때마다 변경된 상태를 기준으로 UI 를 다시 렌더링함.
    - 재렌더링 시 python 변수는 초기화가 되기 때문에, 사용자의 세션별로 상태를 보존하는 딕셔너리인 st.session_state 를 사용해야함을 알게되었습니다.





